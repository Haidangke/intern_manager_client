<div class="bg-white border-x">
    <p-table [value]="accountList" [tableStyle]="{ 'min-width': '50rem' }">
        <ng-template pTemplate="caption">
            <h4 class="text-lg font-medium mb-4">Account Management</h4>
            <!-- Search box -->
            <div class="flex justify-between">
                <div class="relative w-full md:w-[18.75rem]">
                    <span class="p-input-icon-left">
                        <i class="pi pi-search"></i>
                        <input
                            type="text"
                            pInputText
                            placeholder="Search account"
                        />
                    </span>
                </div>
                <p-button
                    (onClick)="isDialog = true"
                    label="Add account"
                ></p-button>
            </div>
        </ng-template>
        <ng-template pTemplate="header">
            <tr>
                <th>#</th>
                <th>Username</th>
                <th>Role</th>
                <th>Linked User</th>
                <th>Actions</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="emptymessage" let-columns let-index>
            <tr>
                <td [attr.colspan]="4">
                    <div class="flex flex-col items-center gap-3">
                        <i
                            [style]="{ 'font-size': '20px' }"
                            class="pi pi-inbox"
                        ></i>
                        <span>No records found</span>
                    </div>
                </td>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-account let-index="rowIndex">
            <tr>
                <td>{{ index + 1 }}</td>
                <td>{{ account.username }}</td>
                <td>{{ account.role }}</td>
                <td>{{ account.intern.name }}</td>
                <td>
                    <div class="flex items-center gap-3">
                        <button
                            class="rounded-full btn icon secondary sm"
                            (click)="handleDeleteAccount(account.id)"
                        >
                            <i class="pi pi-trash"></i>
                        </button>
                    </div>
                </td>
            </tr>
        </ng-template>
    </p-table>
</div>

<p-dialog
    [resizable]="false"
    [draggable]="false"
    header="Add Account"
    [(visible)]="isDialog"
    [style]="{ width: '70%' }"
>
    <app-account-form (onSuccess)="onAddAccountSuccess()"></app-account-form>
</p-dialog>

<p-confirmDialog [style]="{ width: '50vw' }"></p-confirmDialog>
